blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
devtools::install_github("daattali/timevis")
library(timevis)
timevis()
blogdown:::new_post_addin()
blogdown:::serve_site()
blogdown:::build_site()
getwd()
q()
q()
q()
getwd()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
runGist('https://gist.github.com/yihui/6091942')
blogdown:::serve_site()
library("recharts", lib.loc="~/R/x86_64-redhat-linux-gnu-library/3.4")
eBmap()
blogdown:::serve_site()
blogdown:::serve_site()
library(leaflet)
library(widgetframe)
l <- leaflet() %>% addProviderTiles(providers$CartoDB.DarkMatter) %>% setView(0,0,2)
frameWidget(l)
library(dygraphs)
ts <- dygraph(nhtemp, main = "New Haven Temperatures",
height=250, width='95%')
frameWidget(ts)
library(DT)
dt <-  datatable(
head(iris, 20),
options = list(
columnDefs = list(list(className = 'dt-center', targets = 5)),
pageLength = 5, lengthMenu = c(5, 10, 15, 20)),
fillContainer = T)
frameWidget(dt, height = 350, width = '95%')
library(DT)
dt <-  datatable(
head(iris, 20),
options = list(
columnDefs = list(list(className = 'dt-center', targets = 5)),
pageLength = 5, lengthMenu = c(5, 10, 15, 20)),
fillContainer = T)
dt
frameWidget(dt, height = 350, width = '95%')
frameOptions()
frameWidget
htmlwidgets::createWidget
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::serve_site()
blogdown:::serve_site()
library(leaflet)
library(widgetframe)
l <- leaflet() %>% addTiles() %>% setView(0,0,2)
frameWidget(l, height = '400')
library(leaflet)
library(widgetframe)
l <- leaflet() %>% addTiles() %>% setView(0,0,2)
frameWidget(l, height = '400')
getwd()
library(DT)
dt <-  datatable(
head(iris, 20),
options = list(
columnDefs = list(list(className = 'dt-center', targets = 5)),
pageLength = 5, lengthMenu = c(5, 10, 15, 20)),
fillContainer = T)
library(widgetframe)
htmlwidgets::saveWidget(frameableWidget(dt),'dt.html')
library(DT)
library(widgetframe)
dt <-  datatable(
head(iris, 20),
options = list(
columnDefs = list(list(className = 'dt-center', targets = 5)),
pageLength = 5, lengthMenu = c(5, 10, 15, 20)),
fillContainer = T)
htmlwidgets::saveWidget(frameableWidget(dt),'dt.html')
frameableWidget(dt)
frameWidget(dt)
htmlwidgets::saveWidget(frameWidget(dt),'dt.html')
frameWidget(dt)
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::new_post_addin()
library(timevis)
templateWC("quarter-finals", "France", "Germany", 0, 1)
templateWC <- function(stage, team1, team2, score1, score2) {
sprintf(
'<table><tbody>
<tr><td colspan="3"><em>%s</em></td></tr>
<tr>
<td>%s</td>
<th>&nbsp;%s - %s&nbsp;</th>
<td>%s</td>
</tr>
<tr>
<td><img src="flags/%s.png" width="31" height="20" alt="%s"></td>
<th></th>
<td><img src="flags/%s.png" width="31" height="20" alt="%s"></td>
</tr>
</tbody></table>',
stage, team1, score1, score2, team2, gsub("\\s", "", tolower(team1)),
team1, gsub("\\s", "", tolower(team2)), team2
)
}
templateWC("quarter-finals", "France", "Germany", 0, 1)
cat(templateWC("quarter-finals", "France", "Germany", 0, 1))
templateWC <- function(stage, team1, team2, score1, score2) {
sprintf(
'<table><tbody>
<tr><td colspan="3"><em>%s</em></td></tr>
<tr>
<td>%s</td>
<th>&nbsp;%s - %s&nbsp;</th>
<td>%s</td>
</tr>
<tr>
<td><img src="https://github.com/hjnilsson/country-flags/blob/master/png100px/%s.png" width="31" height="20" alt="%s"></td>
<th></th>
<td><img src="https://github.com/hjnilsson/country-flags/blob/master/png100px/%s.png" width="31" height="20" alt="%s"></td>
</tr>
</tbody></table>',
stage, team1, score1, score2, team2, gsub("\\s", "", tolower(team1)),
team1, gsub("\\s", "", tolower(team2)), team2
)
}
templateWC("quarter-finals", "fr", "ge", 0, 1)
cat(templateWC("quarter-finals", "fr", "ge", 0, 1))
blogdown:::serve_site()
detach("package:timevis", unload=TRUE)
remove.packages("timevis", lib="~/R/x86_64-redhat-linux-gnu-library/3.4")
devtools::install_github("daattali/timevis")
blogdown:::serve_site()
x = "\\xE6\\xA0\\xB9"
x
gsub("\\", "\", x)
gsub("\\", "\\", x, fixed = TRUE)
gsub("\\\\", "\\", x, fixed = TRUE)
gsub("`\\`", "`\`", x, fixed = TRUE)
gsub(`\\`, "`\`", x, fixed = TRUE)
gregexpr('\\', x)
gregexpr('\\', x, fixed = T)
x
gregexpr('\\', x, fixed = T)[[1]]
nchar(x)
runApp('~/projectJC/crawler/back_conf/app-v1.0')
runApp('~/projectJC/crawler/back_conf/app-v1.0')
# source("init/")
library(shiny)
library(tagsinput)
library(shinydashboard)
library(shinyWidgets)
library(DT)
library(data.table)
library(dplyr)
library(lubridate)
library(tools)
library(shinyBS)
library(RMySQL)
library(digest)
library(shinyjs)
library(jsonlite)
library(readr)
library(digest)
install.packages("sweetalertR")
install_github("timelyportfolio/sweetalertR")
library(devtools)
install_github("timelyportfolio/sweetalertR")
library(sweetalertR)
runApp('~/projectJC/crawler/back_conf/app-v1.0')
shinyApp(
ui = fluidPage(
tags$h1("Click the button"),
actionButton(inputId = "success", label = "Launch a success sweet alert"),
actionButton(inputId = "error", label = "Launch an error sweet alert"),
useSweetAlert()
),
server = function(input, output, session) {
observeEvent(input$success, {
sendSweetAlert(
session = session, title = "Success !!", text = "All in order", type = "success"
)
})
observeEvent(input$error, {
sendSweetAlert(
session = session, title = "Error !!", text = "It's broken...", type = "error"
)
})
}
)
runApp('~/projectJC/crawler/back_conf/app-v1.0')
runApp('~/projectJC/crawler/back_conf/app-v1.0')
runApp('~/projectJC/crawler/back_conf/app-v1.0')
getwd()
blogdown:::new_post_addin()
q()
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::serve_site()
blogdown:::new_post_addin()
s1 = '恒C信华夏12幸银业福AA'
s2 = '恒信银业'
agrep(s2, s1, max = list(cost = 100), value = TRUE)
agrep(s2, s1, max = list(all = 2), value = TRUE)
agrep(s2, s1, max = 0.1, value = TRUE)
agrep("lasy", "1 lazy 2")
agrep("lasy", "1 lazy 2", max = list(sub = 1))
agrep("laysy", c("1 lazy", "1", "1 LAZY"), max = 1)
agrep("laysy", c("1 lazy", "1", "1 LAZY"), max = 2, value = TRUE)
agrep("laysy", c("1 lazy", "1", "1 LAZY"), max = 2, ignore.case = TRUE)
s1 = '恒信（华夏幸银业福）'
s2 = '恒信银业'
agrep(s2, s1, max = list(cost = 100), value = TRUE)
agrep(s2, s1, max = list(all = 2), value = TRUE)
agrep(s2, s1, max = 0.1, value = TRUE)
nms = str_remove_all(dat_i$pro_nm_abbr, '[^\\w+]')
s1 = '恒信（华夏幸银业福）'
s2 = '恒信银业'
agrep(s2, s1, max = list(cost = 100), value = TRUE)
agrep(s2, s1, max = list(all = 2), value = TRUE)
agrep(s2, s1, max = 0.1, value = TRUE)
s1 = '恒信（华夏幸银业福）'
s2 = '恒信银业'
# nms = str_remove_all(dat_i$pro_nm_abbr, '[^\\w+]')
agrep(s2, s1, max = list(cost = 5), value = TRUE)
agrep(s2, s1, max = list(all = 2), value = TRUE)
agrep(s2, s1, max = 0.1, value = TRUE)
s1 = '恒信（华夏幸银业福）'
s2 = '恒信银业'
# nms = str_remove_all(dat_i$pro_nm_abbr, '[^\\w+]')
agrep(s2, s1, max = list(cost = 4), value = TRUE)
agrep(s2, s1, max = list(all = 2), value = TRUE)
agrep(s2, s1, max = 0.1, value = TRUE)
agrep(s2, s1, max = list(cost = 3), value = TRUE)
s1 = '恒信（华夏幸银业福）'
s2 = '恒信银业'
# nms = str_remove_all(dat_i$pro_nm_abbr, '[^\\w+]')
agrep(s2, s1, max = list(cost = 3), value = TRUE)
agrep(s2, s1, max = list(all = 2), value = TRUE)
agrep(s2, s1, max = 0.1, value = TRUE)
s1 = '恒信（华夏幸银业福）'
s2 = '恒信银业'
# nms = str_remove_all(dat_i$pro_nm_abbr, '[^\\w+]')
agrep(s2, s1, max = list(cost = 1), value = TRUE)
agrep(s2, s1, max = list(all = 2), value = TRUE)
agrep(s2, s1, max = 0.1, value = TRUE)
s1 = '恒信（华夏幸银业福）'
s2 = '恒信银业'
# nms = str_remove_all(dat_i$pro_nm_abbr, '[^\\w+]')
agrep(s2, s1, max = list(cost = 2), value = TRUE)
agrep(s2, s1, max = list(all = 2), value = TRUE)
agrep(s2, s1, max = 0.1, value = TRUE)
s1 = '恒信（华夏幸银业福）'
s2 = '恒信银业'
# nms = str_remove_all(dat_i$pro_nm_abbr, '[^\\w+]')
agrep(s1, s2, max = 2, value = TRUE)
agrep(s1, s2, max = 0.1, value = TRUE)
s1 = '恒信（华夏幸银业福）'
s2 = '恒信银业'
# nms = str_remove_all(dat_i$pro_nm_abbr, '[^\\w+]')
agrep(s1, s2, max = 4, value = TRUE)
agrep(s1, s2, max = 0.1, value = TRUE)
s1 = '恒信（华夏幸银业福）'
s2 = '恒信银业'
# nms = str_remove_all(dat_i$pro_nm_abbr, '[^\\w+]')
agrep(s1, s2, max = 4, value = TRUE)
agrep(s1, s2, max = 6, value = TRUE)
agrep(s1, s2, max = 0.1, value = TRUE)
library(stringr)
str_test = 'I ***爱 ¥¥¥coding1-7'
str_remove_all(str_test, '[^\\w+]')
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::serve_site()
library(RMySQL)
library(dplyr)
# db <- dbConnect(MySQL(), dbname = "ppp_crawl", host = 'localhost',
#                 port = 3306, user = 'root',
#                 password = 'jc1116')
#
# dbSendQuery(db,'SET NAMES utf8')
# dbListTables(db)
# dat = dbReadTable(db, "cpppc")
# dbDisconnect(db)
# root/XDQ@$jc1116
# xuwy/XWY01@jc1116
# vip_indata
db <- dbConnect(MySQL(), dbname = "testutf", host = '43.241.232.105',
port = 3306, user = 'xuwy',
password = 'XWY01@jc1116')
dbSendQuery(db,'SET NAMES utf8')
dbListTables(db)
dbDisconnect(db)
setwd('~/Downloads/data/intimeVIP/')
lt_files = list.files()
res = NULL
# for (i in 1:length(lt_files)) {
for (i in 1:2) {
print(i)
t_file = lt_files[i]
tmp = readxl::read_excel(t_file)
tmp = tmp %>%
filter(!(is.na(MOBILEPHONE) & is.na(TELEPHONE))) %>%
select(SEQNO,
NAME,
IDNO,
SEX,
BIRTHDAY,
ENABLEDATE,
MOBILEPHONE,
TELEPHONE,
ADDRESS,
MAIL,
STORENO)
if(is.null(res)){
res = tmp
}else{
res = res[!(res$SEQNO %in% tmp$SEQNO), ]
res = rbind(res, tmp)
print(dim(res))
}
}
db <- dbConnect(MySQL(), dbname = "vipdata", host = 'localhost',
port = 3306, user = 'root',
password = 'jc1116')
dbSendQuery(db,'SET NAMES utf8')
dbWriteTable(db, 'latest_vip', res, overwrite = TRUE, row.names=FALSE)
dbListTables(db)
dbDisconnect(db)
db <- dbConnect(MySQL(), dbname = "vipdata", host = 'localhost',
port = 3306, user = 'root',
password = 'jc1116')
dbSendQuery(db,'SET NAMES utf8')
dbWriteTable(db, 'latest_vip', res, overwrite = TRUE, row.names=FALSE)
dbListTables(db)
dbDisconnect(db)
str1 = '体评\xe42b61d592.PDF,\n\xbc\xb0情定折现率R：RRd1TWdReWe式中 ：‘'
gsub('[^\u4E00-\u9FA5A-Za-z0-9_]', '', str1)
gsub('[^\u4E00-\u9FA5A-Za-z0-9_,.]', '', str1)
gsub('[^\u4E00-\u9FA5A-Za-z0-9_,.;:]', '', str1)
gsub('[^\u4E00-\u9FA5A-Za-z0-9_,.;:‘’“”，。；：《》]', '', str1)
blogdown:::new_post_addin()
str1 = '体评\xe42b61d592.PDF,\n\xbc\xb0情定折现率R：RRd1TWdReWe式中 ：‘'
gsub('[^\u4E00-\u9FA5A-Za-z0-9_,.;:‘’“”，。；：《》-—]', '', str1)
str1 = '体评\xe42b61d592.PDF,\n\xbc\xb0情定折现率R：RRd1TWdReWe式中 ：‘'
gsub('[^\u4E00-\u9FA5A-Za-z0-9_,.;:‘’“”，。；：《》]', '', str1)
# [1] "体评2b61d592.PDF,情定折现率R：RRd1TWdReWe式中：‘"
str1 = '体评\xe42b61d592.PDF,\n\xbc\xb0情定折现率R：RRd1TWdReWe式中 ：‘'
gsub('[^\u4E00-\u9FA5A-Za-z0-9_,.;:‘’“”，。；：《》—]', '', str1)
# [1] "体评2b61d592.PDF,情定折现率R：RRd1TWdReWe式中：‘"
str1 = '体评\xe42b61d592.PDF,\n\xbc\xb0情定折现率R：RRd1TWdReWe式中 ：‘'
gsub('[^\u4E00-\u9FA5A-Za-z0-9_,.;:‘’“”，。；：《》—\-]', '', str1)
str1 = '体评\xe42b61d592.PDF,\n\xbc\xb0情定折现率R：RRd1TWdReWe式中 ：‘'
gsub('[^\u4E00-\u9FA5A-Za-z0-9_,.;:‘’“”，。；：《》—\\-]', '', str1)
# [1] "体评2b61d592.PDF,情定折现率R：RRd1TWdReWe式中：‘"
str1 = '体评\xe42b61d592.PDF,\n\xbc\xb0情定折-现率R：RRd1TWdReWe式中 ：‘'
gsub('[^\u4E00-\u9FA5A-Za-z0-9_,.;:‘’“”，。；：《》—\\-]', '', str1)
# [1] "体评2b61d592.PDF,情定折现率R：RRd1TWdReWe式中：‘"
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::serve_site()
bd_lt = list("latitude" = "30.313187",
"longitude" = "120.144434",
"loginId" = "xuwy01",
"OSType" = "A",
"accessToken" = "abebb68995bb4aa4be02b6ac4b63526a",
"clientId" = "12345678",
"clientVersion" = "3.10.0",
"secret" = "iuu#w@jdn3",
"userNo" = "10817")
bd_lt
library(httr)
library(rvest)
# 提交评论 comment
url = sprintf('capijcer.jcease.com/jcer/info/insertPunchClockTime')
h <- c("okhttp/3.10.0")
names(h) <- c("User-Agent")
bd_lt = list("latitude" = "30.313187",
"longitude" = "120.144434",
"loginId" = "xuwy01",
"OSType" = "A",
"accessToken" = "abebb68995bb4aa4be02b6ac4b63526a",
"clientId" = "12345678",
"clientVersion" = "3.10.0",
"secret" = "iuu#w@jdn3",
"userNo" = "10817")
wordup = sample(wordsp, 1)
u1 = POST(url, add_headers(.headers = h),
body = bd_lt)
rvt = read_html(u1)
rvt
library(httr)
library(rvest)
# 提交评论 comment
url = sprintf('http://capijcer.jcease.com/jcer/info/insertPunchClockTime')
h <- c("okhttp/3.10.0")
names(h) <- c("User-Agent")
bd_lt = list("latitude" = "30.313187",
"longitude" = "120.144434",
"loginId" = "xuwy01",
"OSType" = "A",
"accessToken" = "abebb68995bb4aa4be02b6ac4b63526a",
"clientId" = "12345678",
"clientVersion" = "3.10.0",
"secret" = "iuu#w@jdn3",
"userNo" = "10817")
u1 = POST(url, add_headers(.headers = h),
body = bd_lt)
rvt = read_html(u1)
rvt = jsonlite::fromJSON(html_text(rvt))
print(rvt)
library(httr)
library(rvest)
# 提交评论 comment
url = sprintf('https://capijcer.jcease.com/jcer/info/insertPunchClockTime')
h <- c("okhttp/3.10.0")
names(h) <- c("User-Agent")
bd_lt = list("latitude" = "30.313187",
"longitude" = "120.144434",
"loginId" = "xuwy01",
"OSType" = "A",
"accessToken" = "abebb68995bb4aa4be02b6ac4b63526a",
"clientId" = "12345678",
"clientVersion" = "3.10.0",
"secret" = "iuu#w@jdn3",
"userNo" = "10817")
u1 = POST(url, add_headers(.headers = h),
body = bd_lt)
rvt = read_html(u1)
rvt = jsonlite::fromJSON(html_text(rvt))
print(rvt)
url
library(httr)
library(rvest)
# 提交评论 comment
url = 'http://capijcer.jcease.com/jcer/info/insertPunchClockTime/'
h <- c("okhttp/3.10.0")
names(h) <- c("User-Agent")
bd_lt = list("latitude" = "30.313187",
"longitude" = "120.144434",
"loginId" = "xuwy01",
"OSType" = "A",
"accessToken" = "abebb68995bb4aa4be02b6ac4b63526a",
"clientId" = "12345678",
"clientVersion" = "3.10.0",
"secret" = "iuu#w@jdn3",
"userNo" = "10817")
u1 = POST(url, add_headers(.headers = h),
body = bd_lt)
rvt = read_html(u1)
rvt = jsonlite::fromJSON(html_text(rvt))
print(rvt)
bd_lt = list(latitude = 30.313187,
longitude = 120.144434,
loginId = "xuwy01",
OSType = "A",
accessToken = "abebb68995bb4aa4be02b6ac4b63526a",
clientId = "12345678",
clientVersion = "3.10.0",
secret = "iuu#w@jdn3",
userNo = "10817")
u1 = POST(url,
add_headers(.headers = h),
body = bd_lt)
POST(url,
add_headers(.headers = h),
body = bd_lt)
h <- c("okhttp/3.10.0", 'application/json')
names(h) <- c("User-Agent", 'Content-Type')
bd_lt = list(latitude = 30.313187,
longitude = 120.144434,
loginId = "xuwy01",
OSType = "A",
accessToken = "abebb68995bb4aa4be02b6ac4b63526a",
clientId = "12345678",
clientVersion = "3.10.0",
secret = "iuu#w@jdn3",
userNo = "10817")
POST(url,
add_headers(.headers = h),
body = bd_lt)
library(httr)
library(rvest)
# 提交评论 comment
url = 'http://capijcer.jcease.com/jcer/info/insertPunchClockTime/'
h <- c("okhttp/3.10.0", 'application/json')
names(h) <- c("User-Agent", 'Content-Type')
bd_lt = list(latitude = 30.313187,
longitude = 120.144434,
loginId = "xuwy01",
OSType = "A",
accessToken = "abebb68995bb4aa4be02b6ac4b63526a",
clientId = "12345678",
clientVersion = "3.10.0",
secret = "iuu#w@jdn3",
userNo = "10817")
POST(url,
add_headers(.headers = h),
body = bd_lt)
